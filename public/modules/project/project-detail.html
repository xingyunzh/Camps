<div class="container">
    <div class="row">
        <div class="col-xs-9 camps-card-space">
            <div class="row">
                <div class="camps-idea-d-title">
                    <span>{{theProject.name}}</span>
                    <input type="text" class="form-control" ng-model="form.name" ng-show="isNameEditing">
                    <button class="btn btn-primary pull-right" ng-click="onDataEdit(['name'], 'isNameEditing')" ng-show="allowEditProject()">{{isNameEditing ? "完成":"修改"}}</button>
                    <button class="btn btn-default pull-right" ng-click="isNameEditing=false;" ng-show="isNameEditing">取消</button>
                </div>
            </div>

            <div class="row">
                <div class="camps-idea-d-text-section">
                    项目范围:
                    <span ng-hide="isScopeEditing"><span ng-bind="theProject.scope"></span></span>
                    <span ng-show="isScopeEditing">
                        <textarea class='form-control' cols="30" rows="10" ng-model="form.scope" ></textarea>
                    </span>

                    <button class="btn btn-primary pull-right" ng-click="onDataEdit(['scope'], 'isScopeEditing')" ng-show="allowEditProject()">{{isScopeEditing ? "完成":"修改"}}</button>
                    <button class="btn btn-default pull-right" ng-click="isScopeEditing=false;" ng-show="isScopeEditing">取消</button>
                </div>
            </div>

            <div class="row">
                <div class="camps-idea-d-text-section">
                        <span>创意:</span>
                        <span>
                            <a ng-click="handleIdeaLink()">{{theProject.relatedIdea.name}}</a>
                        </span>
                </div>
            </div>

            <div class="row">
                <div class="camps-idea-d-text-section">
                    需求分析与项目计划
                </div>
            </div>
            <div class="row camps-project-d-wbs">
                <div class="col-md-7">
                    <div class="camps-idea-d-text-section">
                        Backlog:
                        <button class="btn btn-link" ng-show="isBacklogEditing" ng-click="onAddOrUpdateStory()"><span>添加</span></button>
                        <button class="btn btn-primary" ng-click="onBacklogEdit()" ng-show="allowEditProject()">{{isBacklogEditing ? "完成":"修改"}}</button>
                        <button class="btn btn-default" ng-click="isBacklogEditing=false;" ng-show="isBacklogEditing">取消</button>

                        <div ui-sortable="sortableOptions" ng-model="backlog" class="list-group">
                            <div ng-repeat="item in backlog" class="list-group-item">
                                <div class="row">
                                    <div class="col-md-10">
                                        <a ng-click="handleStoryOrSprints($event)">
                                            <div class="text-left" ng-style="{'text-decoration':item.deleted ? 'line-through' : 'none'}">
                                                <span><strong>US {{item._id.slice(0,1) + "***" + item._id.slice(-4)}}</strong></span>
                                                <span>{{item | nameOfStory}}</span>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="col-md-2" ng-show="isBacklogEditing">
                                        <span>
                                            <a ng-click="onRemoveStory(item)">删除</a>
                                            <a ng-click="onAddOrUpdateStory(item)">编辑</a>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="camps-idea-d-text-section">
                        Sprints (Not Implemented)

                        <button class="btn btn-link" ng-show="isSprintEditing" ng-click="onAddOrUpdateSprint()"><span>添加</span></button>
                        <button class="btn btn-primary" ng-click="onSprintEdit()" ng-show="allowEditTasks()">{{isSprintEditing ? "完成":"修改"}}</button>
                        <button class="btn btn-default" ng-click="isSprintEditing=false;" ng-show="isSprintEditing">取消</button>

                        <div class="list-group">
                            <a class="list-group-item" ng-repeat="item in sprints" ng-click="handleStoryOrSprints($event)">
                                <span>Sprint {{item.endDate | date:'yyyy-MM-dd'}}</span>
                                <span class="badge" ng-show="item.tasks.length > 0">{{item.tasks.length}}</span>
                            </a>
                        </div>
                    </div>
                </div>

                <div class="col-md-5">
                    <div class="camps-idea-d-text-section camps-project-d-task-panel">
                        Task:(Not Implemented)
                        <button class="btn btn-link" ng-show="isTaskEditing" ng-click="onAddOrUpdateTask()"><span>添加</span></button>
                        <button class="btn btn-primary" ng-click="onTaskEdit()" ng-show="allowEditTasks()">{{isTaskEditing ? "完成":"修改"}}</button>
                        <button class="btn btn-default" ng-click="isTaskEditing=false;" ng-show="isTaskEditing">取消</button>

                        <ul class="list-group">
                            <li class="list-group-item">Task1</li>
                            <li class="list-group-item">Task2</li>
                            <li class="list-group-item">Task3</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="camps-idea-d-text-section">
                    项目文档:
                    <div class="camps-project-d-attachments">
                        <a ng-href="{{attachment}}" ng-repeat="attachment in sampleAttachments">
                            <div class="thumbnail text-center">
                                <img src="./images/logo.png" alt="File" width="60px" hight="90px">
                                <div><span>{{nameFromAttachment(attachment)}}</span></div>
                                <button class="btn btn-primary" ng-show="isAttachmentsEditing">删除</button>
                            </div>
                        </a>
                        <a ng-click="" ng-show="isAttachmentsEditing">
                            <div class="thumbnail text-center">
                                <div ngf-select="uploadFile($file)">
                                    <img src="./images/logo.png" alt="File" width="60px" hight="80px">
                                    <div><span>{{fileToUpload ? nameFromAttachment(fileToUpload) : "上传文件"}}</span></div>
                                </div>
                            </div>
                        </a>

                    </div>

                    <button class="btn btn-primary pull-right"
                            ng-click="onDataEdit(['attachments'], 'isAttachmentsEditing')" ng-show="allowEditTasks()">
                        {{isAttachmentsEditing ? "完成":"修改"}}
                    </button>
                    <button class="btn btn-default pull-right" ng-click="isAttachmentsEditing=false;"
                            ng-show="isAttachmentsEditing">取消
                    </button>
                </div>
            </div>

            <div class="row">
                <div class="camps-idea-d-text-section">
                    <span>项目人员:</span>
                </div>
            </div>

            <div class="row">
                <div class="camps-idea-d-text-section">
                    队长: &nbsp;
                    <camps-user-head user="theTeam.lead" width="60" height="60"></camps-user-head>
                </div>
            </div>
            <div class="row">
                <div class="camps-idea-d-text-section">
                    成员: &nbsp;
                    <span ng-repeat="user in theTeam.member">
                        <span class="camps-team-d-members">
                            <camps-user-head user="user" width="60" height="60"></camps-user-head>
                        </span>
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="camps-idea-d-text-section">
                    教练: &nbsp;
                    <camps-user-head user="theTeam.coach" width="60" height="60"></camps-user-head>
                </div>
            </div>

        </div>
        <div class="col-xs-3 camps-panel-space">

        </div>
    </div>

</div>













